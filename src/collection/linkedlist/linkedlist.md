# 노드와 연결

## 배열 리스트의 단점

- 배열에서 사용하지 않는 공간은 낭비된다.
- 배열의 중간에 데이터를 추가하기 위해 데이터를 오른쪽으로 이동해야 한다.

## 노드와 연결

- 낭비되는 메모리 없이 딱 필요한 만큼만 메모리르 확보한다.
- 앞이나 중간에 데이터를 추가, 삭제할 떄도 효율적이다.

```java
public class Node {
    Object item;
    Node next;
}
```

- 노드 인스턴스를 생성하고 item에 데이터를 넣는다.
- next에 다음에 만든 노드의 참조값을 넣는다.
- node.next로 다음 노드를 구할 수 있다.

### 정리

- 노드는 내부에 데이터와 다음 노드에 대한 참조를 가지고 있다.
- 지금까지 설명한 구조는 각각의 노드가 참조를 통해 연결되어 있다.
- 데이터를 추가할 때 동적으로 필요한 만큼의 노드만 만들어서 연결한다.
    - 배열과 다르게 메모리를 낭비하지 않는다.
    - 물론 next로 참조값을 보관해야 하기 떄문에 배열과 비교해 추가적인 메모리 낭비가 발생한다.

## 연결 리스트와 빅오

### get(int index)

- 특정 위치에 있는 데이터를 반환한다.
- O(n)
    - 배열은 인덱스로 원하는 데이터를 즉시 찾을 수 있어 O(1)이 걸린다.
    - 하지만 연결 리스트에서 사용하는 노드는 배열이 아니다. 단지 다음 노드에 대한 참조가 있을 뿐이다. 인덱스 숫자만큼 다음 노드를 반복해서 찾아야 한다.

### add(Object e)

- 마지막에 데이터를 추가한다.
- O(n)
    - 마지막 노드를 찾는 데에 O(n) + 마지막 노드에 추가하는데에 O(1)

### set(int index, Object e)

- 특정 위치에 있는 데이터를 찾아서 변경하고 옛날 값을 반환한다.
- O(n)
    - 특정 위치를 찾기 위해 순회한다.

### indexOf(Object e)

- 데이터를 검색하고 검색된 위치를 반환한다.
- O(n)
    - 모든 노드를 순회하면서 같은 데이터가 있는지 찾는다.

### 정리

- 연결 리스트에 데이터를 추가하면 필요한 메모리만 사용하기 때문에 배열 리스트처럼 메모리를 낭비하지 않는다.
    - 물론 연결을 유지하기 위한 추가 메모리가 사용되긴 한다.

## 추가와 삭제

- 특정 위치에 데이터를 추가하고 제거한다.

### 첫번째 위치의 데이터 추가

1. 신규 노드를 생성한다.
2. 신규 노드와 다음 노드를 연결한다.
3. first에 신규 노드를 연결한다.

- first의 참조와 새로운 노드 next 참조를 변경하면 된다.
- O(1)

### 첫번쨰 위치의 데이터 삭제

1. 삭제 대상을 선택한다.
2. first에 삭제 대상의 다음 노드를 선택한다.

- 삭제할 대상의 다음 노드로 참조를 바꾼다.
- 참조가 끊기면 GC의 대상이 되어 제거된다.
- O(1)

### 중간 위치에 데이터 추가

1. 새로운 노드를 생성하고 노드가 입력될 위치의 직전 노드를 찾아둔다.
2. 신규 노드와 다음 노드를 연결한다.
3. 직전 노드에 신규 노드를 연결한다.

- O(n)
    - 인덱스를 사용해서 노드를 추가할 위치를 찾는데 O(n), 추가하는데에 O(1)
- 데이터를 밀 필요 없이 참조만 바꾸면 된다.

### 중간 위치의 데이터 삭제

1. 삭제 대상을 찾고 삭제 대상의 직전 노드도 찾아둔다.
2. 직전 노드의 다음 노드를 삭제 노드의 다음 노드와 연결한다.
3. 삭제 노드는 GC의 대상이 되어 제거된다.

- O(n)
    - 삭제할 항목을 찾는데에 O(n), 삭제하는데에 O(1)

## 직접 구현한 배열 리스트와 연결 리스트의 성능 비교

| 기능        | 배열 리스트 | 연결 리스트 |
|-----------|--------|--------|
| 인덱스로 조회   | O(1)   | O(n)   |
| 검색        | O(n)   | O(n)   |
| 앞에 추가, 삭제 | O(n)   | O(1)   |
| 뒤에 추가, 삭제 | O(1)   | O(n)   |
| 평균 추가, 삭제 | O(n)   | O(n)   |

-  실제 자바의 연결 리스트는 이중 연결 리스트이기 때문에 뒤에서 추가하거나 삭제할 떄에도 O(1)이다.
