# 리스트 vs 셋

- 리스트
    - 특정한 순서를 유지한다.
    - 중복을 허용한다.
    - 인덱스로 접근할 수 있다.
- 셋
    - 요소가 중복되지 않는다.
    - 순서를 보장하지 않는다.
        - 출력과 입력의 순서가 다를 수 있다.
    - 요소의 유무를 빠르게 조회할 수 있다.

# 해시 알고리즘

- 값이 존재하는지 찾으려면 모든 값을 순회해야 해서 비효율적이다.
- 모든 값이 인덱스가 되도록 바꾸면 O(1)이 된다.
- 대신 모든 값에 대해 공간을 차지해야 하므로 메모리가 낭비된다.
- 배열의 크기만큼 나눈 나머지 값으로 해시 인덱스를 구해서 값을 그 인덱스에 넣으면 된다.
    - 1 % 10 = 1
    - array[1] = 1

## 한계

- 저장할 값이 여러 개가 나와 충돌할 수 있다.
    - 1 % 10 = 1
    - 11 % 10 = 1
- 해시 충돌이 일어나면 같은 인덱스에 같이 저장한다.
    - 배열 안에 배열을 하나 더 만든다.
    - 조회할 때 값이 여러 개면 하나씩 비교한다.
    - 최악의 경우 O(n)
- 하지만 확률적으로 어느정도 넓게 퍼지기 때문에 대부분 O(1)이라고 생각할 수 있다.

## 해시 인덱스 충돌 확률

- CAPACITY가 작을 수록 충돌이 많고 클 수록 충돌이 적어진다.
- 통계적으로 입력한 데이터의 수가 배열의 75%를 넘지 않으면 자주 충돌하지 않는다.

## 정리

- 해시 인덱스를 사용하는 경우
    - 데이터 저장
        - 평균 O(1)
        - 최악의 경우 충돌이 나면 O(n)
    - 데이터 조회
        - 평균 O(1)
        - 최악의 경우 O(n)

# 문자열 해시 코드

- 지금까지는 숫자라서 해시 인덱스를 쉽게 구할 수 있었다. 하지만 값이 문자라면?
- 각 문자의 아스키 코드를 활용하면 된다.
- 문자를 해시 코드로 바꾸고 해시 코드를 해시 인덱스로 바꾼다.

## 해시 함수

- 임의의 데이터를 입력 받아 고정된 데이터 크기의 해시값을 반환하는 함수
    - ex. 1, 100 모두 4byte의 해시 값을 반환한다.
- 같은 데이터를 입력하면 항상 같은 해시 코드가 나온다.
- 다른 데이터를 입력해도 같은 코드가 나올 수 있다. 즉, 해시 충돌이 일어날 수 있다.

## 해시 코드

- 데이터를 대표하는 값으로 보통 해시 함수로 만들어진다.
    - ex. A의 해시 코드는 65

## 해시 인덱스

- 데이터의 저장 위치를 결정한다.
- 주로 해시 코드를 사용해서 만든다.
    - ex. 해시 코드의 결과를 배열의 크기로 나눠서 만든다.

## 정리

- 세상의 어떤 객체든 정수로 만든 해시 코드만 정의할 수 있다면 해시 인덱스를 사용할 수 있다.

# 자바의 hashCode()

- 모든 타입을 해시 자료 구조에 저장하려면 숫자 해시 코드를 제공할 수 있어야 한다.

## Object.hashCode()

- 자바는 모든 객체가 자신만의 해시 코드를 표현하는 기능을 제공한다.

```java
public class Object {
    public int hashCode();
}
```

- 보통 이 메서드를 재정의해서 사용한다.
- 기본 구현은 객체의 참조값을 기반으로 해시 코드를 생성한다.
    - 따라서 인스턴스가 다르면 해시 코드도 다르다.

### 동일성, 동등성

- 동일성
    - ==로 두 객체의 참조가 동일한 객체를 가르키는지 확인한다.
    - 물리적으로 같은 메모리에 있는 객체인지 참조값을 확인한다.
- 동등성
    - equals()로 두 객체가 논리적으로 동등한지 확인한다.

# equals, hashCode의 중요성

- 해시 자료 구조를 사용하려면 hashCode()도 중요하지만 해시 인덱스가 충돌할 경우를 대비해 equals()도 반드시 재정의해야 한다.
    - 해시 인덱스가 충돌할 경우 같은 해시 인덱스에 있는 데이터를 하나하나 비교해야 하는데 이때 equals()를 사용한다.
- hashCode()를 항상 재정의 해야하는 건 아니다. 하지만 해시 자료 구조를 사용하는 경우엔 hashCode()와 equals()를 반드시 함께 재정의 해야 한다.

## 해시 함수는 해시 코드가 최대한 충돌하지 않도록 설계

- 해시가 충돌하면 같은 해시 인덱스에 데이터가 보관되므로 성능이 나빠진다.
    - 최대한 데이터를 골고루 분배해야 한다.
- 자바는 이런 문제를 해결하기 위해 복잡한 추가 연산을 수행한다.
    - 다양한 범위의 해시 코드가 만들어져 충돌 가능성이 낮아지고 성능이 개선된다.